/*! openvod | emma | ISC */
"use strict";!function(){angular.module("app.controllers",[]).controller("indexController",["$scope",function(a){this.init=function(){this.maskUrl=""}}]).controller("loginController",["$scope","$http","$state","$filter","md5","util",function(a,b,c,d,e,f){var g=this;g.init=function(){},g.login=function(){g.loading=!0;var a=JSON.stringify({username:g.userName,password:e.createHash(g.password)});b({method:"POST",url:f.getApiUrl("logon","","server"),data:a}).then(function(a){var b=a.data;"200"==b.rescode?(f.setParams("token",b.token),g.getEditLangs()):alert(b.rescode+" "+b.errInfo)},function(a){alert("连接服务器出错")}).finally(function(a){g.loading=!1})},g.getEditLangs=function(){b({method:"GET",url:f.getApiUrl("","editLangs.json","local")}).then(function(a){f.setParams("editLangs",a.data.editLangs),c.go("app")},function(a){})}}]).controller("appController",["$http","$scope","$state","$stateParams","util","CONFIG",function(a,b,c,d,e,f){var g=this;g.init=function(){g.maskUrl="",g.maskParams={}},g.showHideMask=function(a,c){a?(b.app.maskUrl=c,b.app.showMaskClass=!0):(b.app.maskUrl="",b.app.showMaskClass=!1)}}]).controller("homeController",["$http","$scope","$state","$location","$filter","$stateParams","$q","util","CONFIG",function(a,b,c,d,e,f,g,h,i){var j=this;j.init=function(){},j.logout=function(a){c.go("login")}}]).controller("overviewController",["$http","$scope","$state","$location","$filter","$stateParams","$q","util","CONFIG",function(a,b,c,d,e,f,g,h,i){var j=this;j.init=function(){},j.backHome=function(){}}]).controller("specificController",["$http","$scope","$state","$location","$filter","$stateParams","$q","$log","util","CONFIG",function(a,b,c,d,e,f,g,h,i,j){var k=this;k.init=function(){k.project=[{name:"opennVoD"},{name:"西塘"}],k.term=[{name:"累计终端",value:!0,sort:"",desc:!1},{name:"上线终端",value:!0,sort:"",desc:!1},{name:"活跃终端",value:!0,sort:"",desc:!1},{name:"付费终端",value:!0,sort:"",desc:!1},{name:"新增终端",value:!1,sort:"",desc:!1}],k.other=["其他"],k.orderby={}},k.backHome=function(){},b.items=["The first choice!","And another choice for you.","but wait! A third!"],k.charts={options:{chart:{type:"areaspline",zoomType:"x"},legend:{layout:"vertical",align:"left",verticalAlign:"top",x:150,y:100,floating:!0,borderWidth:1,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF"},xAxis:{categories:["周一","周二","周三","周四","周五","周六","周日"],plotBands:[{from:4.5,to:6.5,color:"rgba(68, 170, 213, .2)"}]},yAxis:{title:{text:"水果 单位"}},tooltip:{shared:!0,valueSuffix:" 单位"},credits:{enabled:!1},plotOptions:{areaspline:{fillOpacity:.5}}},series:[{name:"小张",data:[3,4,3,5,4,10,12]},{name:"小潘",data:[1,3,4,3,3,5,4]}],title:{text:"test"}},k.dataSet=[{datetime:"03-18",cumulative:110,online:99,active:90,pay:42,new:10},{datetime:"03-19",cumulative:110,online:80,active:80,pay:32,new:0},{datetime:"03-20",cumulative:110,online:90,active:89,pay:39,new:0},{datetime:"03-21",cumulative:110,online:85,active:85,pay:42,new:0}],k.changeOrderby=function(a){k.term.sort=a,k.term.desc=!k.term.desc}}])}(),function(){angular.module("app.directives",[]).directive("fileModel",["$parse","CONFIG",function(a,b){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])}),"none"!=d.e&&document.getElementById(d.e).click()})}}}])}(),function(){angular.module("app.services",[]).factory("util",["$cookies","$translate","CONFIG",function(a,b,c){return{getApiUrl:function(a,b,d){return d?"server"==d?c.serverUrl+a:c.testUrl+b:c.test?c.testUrl+b:c.serverUrl+a},getUploadUrl:function(){return c.uploadUrl},setParams:function(b,c){a.put(b,JSON.stringify(c))},getParams:function(b){return!!a.get(b)&&JSON.parse(a.get(b))},langStyle:function(){return b.proposedLanguage()||b.use()},getDefaultLangCode:function(){var b=[];a.get("editLangs")&&(b=JSON.parse(a.get("editLangs")));for(var c=0;c<b.length;c++)if(b[c].default)return b[c].code},uploadFileToUrl:function(a,b,c,d,e,f,g){var d=d?d:"normal",h=new FormData;h.append("action",d),h.append("file",b),a.open("POST",c,!0),a.upload.addEventListener("progress",function(a){e(a)},!1),a.onreadystatechange=function(b){4==a.readyState&&200==a.status&&""!=a.responseText?(console.log(JSON.parse(a.responseText)),0!==JSON.parse(a.responseText).result?g(a):f(a)):200!=a.status&&a.responseText&&g(a)},a.send(h)}}}])}(),function(){angular.module("app.filters",[]).filter("ajaxMethod",["CONFIG",function(a){return function(){return a.test?"GET":"POST"}}]).filter("fenToYuan",function(){return function(a){var b=a+"";return 1==b.length?b="00"+b:2==b.length&&(b="0"+b),b.slice(0,-2)+"."+b.slice(-2)}}).filter("subtitlePercentComplete",function(){return function(a){return a?"失败"==a?a:a+"%":"无"}})}();